<html>
  <head>
    <meta charset="UTF-8" >
    <title>UNET example with p5.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
    <script src="https://unpkg.com/ml5@0.4.3/dist/ml5.min.js" type="text/javascript"></script>
  </head>

  <body>
    <h1>UNET example using p5.js</h1>
    <script>
let uNet;
let img;
let segmentationImage;
let status;
function preload(){
uNet = ml5.uNet('face', modelReady);
}
// load uNet model

function setup() {
  createCanvas(4032, 3024);
  segmentationImage = createImage(width, height);
  img = createImg("banana.JPG", imageReady);
  img.hide();
  img.size(4032,3024);
  
}
      
function modelReady(){
  console.log("model Ready!")
  status = true;
}
function imageReady(){
  console.log("Detecting")
  uNet.segment(img, gotResult);
}
function gotResult(err, result) {
  if (err) {
    console.log(err);
  }
  segmentationImage = result.backgroundMask;
  objects = result;
  //uNet.segment(img, gotResult);
}

function draw() {
    background(0);
    image(segmentationImage, 0, 0, width, height);
    console.log(segmentationImage);
}
      </script>
  </body>
</html>
